<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="cc.icon" rel="icon">
    <style>
        :root {
            --primary: #00ff88;
            --accent: #00d4ff;
            --bg: #0f172a;
            --card-bg: #1e293b;
            --text-main: #ffffff;
            --danger: #ff4757;
        }

        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at 10% 20%, rgba(0, 255, 136, 0.05), transparent);
            color: var(--text-main) !important;
            font-family: 'Cairo', sans-serif;
            min-height: 100vh;
            padding: 20px 0;
            overflow-x: hidden;
        }

        .main-card {
            background: var(--card-bg) !important;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-width: 950px;
            width: 100%;
            animation: slideUp 0.8s ease-out;
        }

        h2 { 
            color: var(--primary) !important; 
            font-weight: 900; 
            text-align: center; 
            margin-bottom: 30px;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        .table { --bs-table-bg: transparent !important; --bs-table-color: var(--text-main) !important; }

        .table th {
            color: var(--accent) !important;
            border-bottom: 2px solid rgba(0, 212, 255, 0.3) !important;
            padding: 12px !important;
        }

        .table td {
            vertical-align: middle;
            border: none !important;
            padding: 10px 5px !important;
        }

        .module-name { 
            text-align: right !important; 
            font-weight: 700; 
            width: 30%;
            color: #ffffff !important;
        }

        .form-control {
            width: 70px !important;
            background-color: #0f172a !important;
            border: 2px solid #334155 !important;
            color: #ffffff !important;
            text-align: center;
            font-weight: 700;
            border-radius: 10px;
            margin: auto;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-control::placeholder { color: #94a3b8 !important; opacity: 1 !important; }

        .form-control:focus {
            border-color: var(--primary) !important;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.4) !important;
            outline: none !important;
        }

        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        .unit-row { background: rgba(0, 212, 255, 0.08) !important; font-weight: 900; }
        .unit-title { color: var(--accent) !important; font-size: 0.95rem; white-space: nowrap; }

        .m-avg { font-weight: 900 !important; font-size: 1.1rem !important; }
        .passed { color: var(--primary) !important; }
        .failed { color: var(--danger) !important; }

        #avgA, #avgM, #avgT { font-weight: 900 !important; font-size: 1.1rem !important; }

        .final-result-container {
            margin-top: 25px;
            border: 2px solid var(--primary);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 10px 40px;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 100%;
        }

        #totalAvg { font-size: 2.5rem; font-weight: 900; transition: all 0.4s; }

        .footer { margin-top: 30px; color: #94a3b8; font-size: 0.85rem; text-align: center; }

        .side-btn {
            position: fixed;
            white-space: nowrap;
            z-index: 9999;
            font-size: 0.85rem;
            padding: 8px 16px;
            gap: 8px;
            border-radius: 0 0 14px 14px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            text-decoration: none;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            transform-origin: center center;
        }

        .telegram-btn { background: #0088cc; color: #fff !important; }
        .instagram-btn { background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: #fff !important; }
        .side-btn svg { width: 16px; height: 16px; fill: currentColor; }

        @keyframes slide-to {
            0%   { transform: rotate(90deg) translateY(0px); }
            60%  { transform: rotate(90deg) translateY(-18px); }
            80%  { transform: rotate(90deg) translateY(-12px); }
            100% { transform: rotate(90deg) translateY(-15px); }
        }

        @keyframes slide-back {
            0%   { transform: rotate(90deg) translateY(-15px); }
            60%  { transform: rotate(90deg) translateY(3px); }
            80%  { transform: rotate(90deg) translateY(-1px); }
            100% { transform: rotate(90deg) translateY(0px); }
        }

        .hover-anim { animation: slide-to 0.4s ease-out forwards !important; }
        .leave-anim { animation: slide-back 0.4s ease-out forwards !important; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes heartBeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.3); }
            28% { transform: scale(1); }
            42% { transform: scale(1.3); }
            70% { transform: scale(1); }
        }

        .pulse-avg { animation: pulse 0.4s ease-in-out; }
        .heart { color: var(--danger); animation: heartBeat 1.5s infinite; display: inline-block; }

        .lang-switcher {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            display: flex;
            gap: 4px;
            background: var(--card-bg);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 5px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.4);
        }

        .lang-btn {
            padding: 5px 11px;
            border-radius: 8px;
            border: 1px solid transparent;
            background: transparent;
            color: #64748b;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            font-size: 0.78rem;
            cursor: pointer;
            transition: all 0.2s;
            letter-spacing: 1px;
        }

        .lang-btn.active {
            background: rgba(0, 255, 136, 0.12);
            color: var(--primary);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .lang-btn:hover:not(.active) {
            color: #fff;
            background: rgba(255,255,255,0.06);
        }
    </style>
</head>
<body>

    <div class="lang-switcher">
        <button class="lang-btn active" onclick="setLang('ar')">AR</button>
        <button class="lang-btn" onclick="setLang('en')">EN</button>
        <button class="lang-btn" onclick="setLang('fr')">FR</button>
    </div>

<div class="container">
    <div class="d-flex justify-content-center">
    <div style="max-width: 950px; width: 100%; padding: 0 10px; margin-bottom: 15px;">
        <a href="index.html" style="
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0,212,255,0.1);
            border: 1px solid rgba(0,212,255,0.3);
            color: var(--accent);
            text-decoration: none;
            font-weight: 700;
            font-size: 0.95rem;
            padding: 8px 20px;
            border-radius: 12px;
            transition: background 0.3s;
        " onmouseover="this.style.background='rgba(0,212,255,0.2)'" onmouseout="this.style.background='rgba(0,212,255,0.1)'">
             <span data-key="back">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </span>
        </a>
    </div>
    </div>
    <div class="d-flex justify-content-center">
    <div class="main-card">
        <h2><span data-key="title">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ Ù„Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø§ÙˆÙ„ </span></h2>

        <div class="table-responsive">
            <table class="table text-center">
                <thead>
                    <tr>
                        <th class="text-end" data-key="module">Ø§Ù„Ù…Ù‚ÙŠØ§Ø³</th>
                        <th data-key="coeff">Ø§Ù„Ù…Ø¹Ø§Ù…Ù„</th>
                        <th data-key="exam">Ø§Ù…ØªØ­Ø§Ù†</th>
                        <th>TD</th>
                        <th>TP</th>
                        <th data-key="avg">Ø§Ù„Ù…Ø¹Ø¯Ù„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="module" data-unit="A" data-type="mix">
                        <td class="module-name" data-key="m1">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 1</td>
                        <td><input type="number" class="form-control coeff" value="3" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td><input type="number" class="form-control td" placeholder="0"></td>
                        <td>-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="A" data-type="mix">
                        <td class="module-name" data-key="m2">ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ</td>
                        <td><input type="number" class="form-control coeff" value="3" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td><input type="number" class="form-control td" placeholder="0"></td>
                        <td>-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="A" data-type="mix">
                        <td class="module-name" data-key="m3">Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ø¯Ø©</td>
                        <td><input type="number" class="form-control coeff" value="3" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td><input type="number" class="form-control td" placeholder="0"></td>
                        <td>-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="A" data-type="mix">
                        <td class="module-name" data-key="m4">Ø§Ù„Ø¬Ø¨Ø± 1</td>
                        <td><input type="number" class="form-control coeff" value="2" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td><input type="number" class="form-control td" placeholder="0"></td>
                        <td>-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="unit-row">
                        <td colspan="5" class="unit-title" style="text-align: right; padding-right: 20px;">
                            <span style="color: var(--accent); margin-left: 10px;" data-key="unitA">(Ùˆ.Øª.Ø£) A00F0001S1</span>
                        </td>
                        <td id="avgA">0.00</td>
                    </tr>

                    <tr class="module" data-unit="M" data-type="tp">
                        <td class="module-name" data-key="m5">TP ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ</td>
                        <td><input type="number" class="form-control coeff" value="1" readonly></td>
                        <td colspan="2">-</td>
                        <td><input type="number" class="form-control tp" placeholder="0"></td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="M" data-type="tp">
                        <td class="module-name" data-key="m6">TP Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ø¯Ø©</td>
                        <td><input type="number" class="form-control coeff" value="1" readonly></td>
                        <td colspan="2">-</td>
                        <td><input type="number" class="form-control tp" placeholder="0"></td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="M" data-type="mix">
                        <td class="module-name" data-key="m7">Ù‡ÙŠÙƒÙ„ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</td>
                        <td><input type="number" class="form-control coeff" value="2" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td><input type="number" class="form-control td" placeholder="0"></td>
                        <td>-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="unit-row">
                        <td colspan="5" class="unit-title" style="text-align: right; padding-right: 20px;">
                            <span style="color: var(--accent); margin-left: 10px;" data-key="unitM">(Ùˆ.Øª.Ù…) A00M0001S1</span>
                        </td>
                        <td id="avgM">0.00</td>
                    </tr>

                    <tr class="module" data-unit="T" data-type="exam">
                        <td class="module-name" data-key="m8">Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚</td>
                        <td><input type="number" class="form-control coeff" value="1" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td colspan="2">-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="module" data-unit="T" data-type="exam">
                        <td class="module-name" data-key="m9">Ø§Ù„Ù…Ù‡Ù† ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§</td>
                        <td><input type="number" class="form-control coeff" value="1" readonly></td>
                        <td><input type="number" class="form-control exam" placeholder="0"></td>
                        <td colspan="2">-</td>
                        <td class="m-avg">0.00</td>
                    </tr>
                    <tr class="unit-row">
                        <td colspan="5" class="unit-title" style="text-align: right; padding-right: 20px;">
                            <span style="color: var(--accent); margin-left: 10px;" data-key="unitT">(Ùˆ.Øª.Ø¹) A00T0001S1</span>
                        </td>
                        <td id="avgT">0.00</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="text-center">
            <div class="final-result-container">
                <span style="color: var(--accent); font-weight: 900; font-size: 1.3rem;" data-key="finalLabel">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„:</span>
                <span id="totalAvg">0.00</span>
                <span style="opacity: 0.5;">/20</span>
            </div>
        </div>
    </div>
    </div>

    <div class="d-flex justify-content-center" style="margin-top: 15px;" id="dedication">
        <div style="max-width: 950px; width: 100%; text-align: center;">
            <p style="color: #475569; font-size: 0.85rem; font-style: italic;">
                Ù‡Ø°Ø§ Ø¯ÙŠØ¯ÙƒØ§Ø³ Ù„Ù€ <span style="color: var(--primary); font-weight: 900;">Sifo</span> ğŸ¤
            </p>
        </div>
    </div>
    <a id="tgBtn" data-href="https://t.me/samaro05" class="side-btn telegram-btn">
        <svg viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
        Telegram
    </a>

    <a id="igBtn" data-href="https://www.instagram.com/yacin_050" class="side-btn instagram-btn">
        <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
        Instagram
    </a>

    <div class="footer">
        <div style="display: flex; justify-content: center; align-items: center; gap: 20px; flex-wrap: wrap;">
            <p style="margin: 0;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø¯Ù‰ Ø³Ù…Ø§Ø±Ùˆ <span class="heart">â¤</span> 2026</p>
        </div>
    </div>
</div>

<script>
    const translations = {
        ar: {
            title: 'Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ Ù„Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø§ÙˆÙ„ ',
            back: 'Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
            module: 'Ø§Ù„Ù…Ù‚ÙŠØ§Ø³', coeff: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„', exam: 'Ø§Ù…ØªØ­Ø§Ù†', avg: 'Ø§Ù„Ù…Ø¹Ø¯Ù„',
            finalLabel: 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„:',
            m1: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª 1', m2: 'ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ', m3: 'Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ø¯Ø©', m4: 'Ø§Ù„Ø¬Ø¨Ø± 1',
            m5: 'TP ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ', m6: 'TP Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ø¯Ø©', m7: 'Ù‡ÙŠÙƒÙ„ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±',
            m8: 'Ø§Ù„Ø¨Ø¹Ø¯ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚', m9: 'Ø§Ù„Ù…Ù‡Ù† ÙÙŠ Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§',
            unitA: '(Ùˆ.Øª.Ø£)   A00F0001S1', unitM: '(Ùˆ.Øª.Ù…)   A00M0001S1', unitT: '(Ùˆ.Øª.Ø¹)   A00T0001S1',
            dir: 'rtl', lang: 'ar'
        },
        en: {
            title: 'First Semester GPA Calculator ',
            back: 'Back to Main Menu',
            module: 'Module', coeff: 'Coefficient', exam: 'Exam', avg: 'Average',
            finalLabel: 'First Semester Average:',
            m1: 'Mathematical Analysis 1', m2: 'Mechanics Physics', m3: 'Structure of Matter', m4: 'Algebra 1',
            m5: 'TP Mechanics Physics', m6: 'TP Structure of Matter', m7: 'Computer Architecture',
            m8: 'Ethics & Moral Dimension', m9: 'Careers in Science & Technology',
            unitA: '(F.T.U)   A00F0001S1', unitM: '(M.T.U)   A00M0001S1', unitT: '(D.T.U)   A00T0001S1',
            dir: 'ltr', lang: 'en'
        },
        fr: {
            title: 'Calcul de Moyenne S1 ',
            back: 'Retour au Menu Principal',
            module: 'MatiÃ¨re', coeff: 'Coefficient', exam: 'Examen', avg: 'Moyenne',
            finalLabel: 'Moyenne du Semestre 1:',
            m1: 'Analyse 1', m2: 'ElÃ©ment de mÃ©canique', m3: 'Structure de la matiÃ¨re', m4: 'AlgÃ¨bre 1',
            m5: 'TP Ã©lÃ©ments de mÃ©canique', m6: 'TP structure de la matiÃ¨re', m7: 'Structure des ordinateurs',
            m8: 'Dimension Ã‰thique et Morale', m9: 'MÃ©tiers en Sciences & Technologie',
            unitA: '(U.E.F)   A00F0001S1', unitM: '(U.E.M)   A00M0001S1', unitT: '(U.E.D)   A00T0001S1',
            dir: 'ltr', lang: 'fr'
        }
    };

    function setLang(lang) {
        const t = translations[lang];
        document.querySelectorAll('[data-key]').forEach(el => {
            if (t[el.dataset.key]) el.textContent = t[el.dataset.key];
        });
        document.documentElement.dir = t.dir;
        document.documentElement.lang = t.lang;
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector(`.lang-btn[onclick="setLang('${lang}')"]`).classList.add('active');
        document.getElementById('dedication').style.display = lang === 'ar' ? 'flex' : 'none';
    }
</script>

<script>
    const allInputs = document.querySelectorAll('input:not([readonly])');
    const totalDisplay = document.getElementById('totalAvg');

    allInputs.forEach(input => {
        input.addEventListener('input', () => {
            calculate();
            totalDisplay.classList.remove('pulse-avg');
            void totalDisplay.offsetWidth;
            totalDisplay.classList.add('pulse-avg');
        });
    });

    function calculate() {
        let units = { A: { sum: 0, coef: 0 }, M: { sum: 0, coef: 0 }, T: { sum: 0, coef: 0 } };

        document.querySelectorAll('.module').forEach(row => {
            const unit = row.dataset.unit;
            const type = row.dataset.type;
            const c = parseFloat(row.querySelector('.coeff').value) || 0;
            const exam = parseFloat(row.querySelector('.exam')?.value) || 0;
            const td = parseFloat(row.querySelector('.td')?.value) || 0;
            const tp = parseFloat(row.querySelector('.tp')?.value) || 0;

            let mAvg = 0;
            if (type === 'mix') mAvg = (exam * 0.6) + (td * 0.4);
            else if (type === 'tp') mAvg = tp;
            else if (type === 'exam') mAvg = exam;

            const cell = row.querySelector('.m-avg');
            cell.textContent = mAvg.toFixed(2);
            cell.className = 'm-avg ' + (mAvg >= 10 ? 'passed' : 'failed');

            units[unit].sum += (mAvg * c);
            units[unit].coef += c;
        });

        let totalPoints = 0, totalCoef = 0;
        for (let k in units) {
            const uAvg = units[k].coef > 0 ? units[k].sum / units[k].coef : 0;
            const uCell = document.getElementById('avg' + k);
            uCell.textContent = uAvg.toFixed(2);
            uCell.className = uAvg >= 10 ? 'passed' : 'failed';
            totalPoints += units[k].sum;
            totalCoef += units[k].coef;
        }

        const final = totalCoef > 0 ? totalPoints / totalCoef : 0;
        totalDisplay.textContent = final.toFixed(2);
        totalDisplay.style.color = final >= 10 ? 'var(--primary)' : 'var(--danger)';
    }

    function setupSideBtn(btnId, index) {
        const btn = document.getElementById(btnId);
        let baseRight, baseTop;

        const updatePosition = () => {
            const w = btn.offsetWidth;
            const h = btn.offsetHeight;
            baseRight = -((w - h) / 2);
            baseTop = ((w - h) / 2) + 80 + (index * 110);
            btn.style.right = baseRight + 'px';
            btn.style.top = baseTop + 'px';
            btn.style.transform = 'rotate(90deg) translateX(0px)';
        };

        updatePosition();
        window.addEventListener('resize', updatePosition);

        btn.addEventListener('mouseenter', function() {
            this.classList.remove('hover-anim', 'leave-anim');
            void this.offsetWidth;
            this.classList.add('hover-anim');
        });

        btn.addEventListener('mouseleave', function() {
            this.classList.remove('hover-anim', 'leave-anim');
            void this.offsetWidth;
            this.classList.add('leave-anim');
        });

        btn.addEventListener('animationend', function() {
            if (this.classList.contains('leave-anim')) {
                this.classList.remove('leave-anim');
                this.style.transform = 'rotate(90deg) translateY(0px)';
            }
        });

        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const href = this.dataset.href;
            setTimeout(() => window.open(href, '_blank'), 200);
        });
    }

    window.addEventListener('load', () => {
        setupSideBtn('tgBtn', 0);
        setupSideBtn('igBtn', 1);
        calculate();
    });
</script>
</body>

</html>

